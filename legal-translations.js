const legalTranslations = {
  de: {
    privacy: {
      title: 'Datenschutzerklärung',
      intro: 'Wir nehmen den Schutz Ihrer persönlichen Daten sehr ernst.',
      lastUpdated: 'Stand',
      sections: {
        overview: {
          title: '1. Datenschutz auf einen Blick',
          general: {
            title: 'Allgemeine Hinweise',
            text: 'Die folgenden Hinweise geben einen einfachen Überblick darüber, was mit Ihren personenbezogenen Daten passiert, wenn Sie diese Website besuchen. Personenbezogene Daten sind alle Daten, mit denen Sie persönlich identifiziert werden können. Ausführliche Informationen zum Thema Datenschutz entnehmen Sie unserer unter diesem Text aufgeführten Datenschutzerklärung.'
          },
          dataCollection: {
            title: 'Datenerfassung auf dieser Website',
            responsible: {
              title: 'Wer ist verantwortlich für die Datenerfassung auf dieser Website?',
              text: 'Die Datenverarbeitung auf dieser Website erfolgt durch den Websitebetreiber. Dessen Kontaktdaten können Sie dem Abschnitt „Hinweis zur Verantwortlichen Stelle" in dieser Datenschutzerklärung entnehmen.'
            },
            how: {
              title: 'Wie erfassen wir Ihre Daten?',
              text1: 'Ihre Daten werden zum einen dadurch erhoben, dass Sie uns diese mitteilen. Hierbei kann es sich z. B. um Daten handeln, die Sie in ein Kontaktformular eingeben.',
              text2: 'Andere Daten werden automatisch oder nach Ihrer Einwilligung beim Besuch der Website durch unsere IT-Systeme erfasst. Das sind vor allem technische Daten (z. B. Internetbrowser, Betriebssystem oder Uhrzeit des Seitenaufrufs). Die Erfassung dieser Daten erfolgt automatisch, sobald Sie diese Website betreten.'
            },
            purpose: {
              title: 'Wofür nutzen wir Ihre Daten?',
              text: 'Ein Teil der Daten wird erhoben, um eine fehlerfreie Bereitstellung der Website zu gewährleisten. Andere Daten können zur Analyse Ihres Nutzerverhaltens verwendet werden. Sofern über die Website Verträge geschlossen oder angebahnt werden können, werden die übermittelten Daten auch für Vertragsangebote, Bestellungen oder sonstige Auftragsanfragen verarbeitet.'
            },
            rights: {
              title: 'Welche Rechte haben Sie bezüglich Ihrer Daten?',
              text1: 'Sie haben jederzeit das Recht, unentgeltlich Auskunft über Herkunft, Empfänger und Zweck Ihrer gespeicherten personenbezogenen Daten zu erhalten. Sie haben außerdem ein Recht, die Berichtigung oder Löschung dieser Daten zu verlangen. Wenn Sie eine Einwilligung zur Datenverarbeitung erteilt haben, können Sie diese Einwilligung jederzeit für die Zukunft widerrufen. Außerdem haben Sie das Recht, unter bestimmten Umständen die Einschränkung der Verarbeitung Ihrer personenbezogenen Daten zu verlangen. Des Weiteren steht Ihnen ein Beschwerderecht bei der zuständigen Aufsichtsbehörde zu.',
              text2: 'Hierzu sowie zu weiteren Fragen zum Thema Datenschutz können Sie sich jederzeit an uns wenden.'
            }
          }
        }
      }
    },
    imprint: {
      title: 'Impressum',
      subtitle: 'Angaben gemäß § 5 TMG',
      contact: 'Kontakt',
      phone: 'Telefon',
      email: 'E-Mail',
      responsible: 'Verantwortlich für den Inhalt nach § 55 Abs. 2 RStV',
      disputeResolution: 'Streitschlichtung',
      disputeText: 'Die Europäische Kommission stellt eine Plattform zur Online-Streitbeilegung (OS) bereit. Wir sind nicht bereit oder verpflichtet, an Streitbeilegungsverfahren vor einer Verbraucherschlichtungsstelle teilzunehmen.'
    },
    cookies: {
      title: 'Cookie-Richtlinie',
      lastUpdated: 'Zuletzt aktualisiert',
      intro: 'Diese Cookie-Richtlinie erklärt, was Cookies sind und wie wir sie verwenden.',
      what: {
        title: 'Was sind Cookies?',
        text: 'Cookies sind kleine Textdateien, die auf Ihrem Computer oder mobilen Gerät gespeichert werden, wenn Sie eine Website besuchen. Sie werden weithin verwendet, um Websites funktionsfähig zu machen oder effizienter zu gestalten, sowie um Berichtsinformationen bereitzustellen.'
      },
      why: {
        title: 'Warum verwenden wir Cookies?',
        text: 'Wir verwenden First-Party- und Third-Party-Cookies aus mehreren Gründen. Einige Cookies sind aus technischen Gründen erforderlich, damit unsere Website funktioniert, und wir bezeichnen diese als "essentielle" oder "unbedingt notwendige" Cookies. Andere Cookies ermöglichen es uns auch, die Interessen unserer Nutzer zu verfolgen und anzusprechen.'
      },
      types: {
        title: 'Welche Arten von Cookies verwenden wir?',
        necessary: 'Notwendige Cookies',
        functional: 'Funktionale Cookies',
        analytics: 'Analyse-Cookies',
        marketing: 'Marketing-Cookies'
      }
    }
  },
  en: {
    privacy: {
      title: 'Privacy Policy',
      intro: 'We take the protection of your personal data very seriously.',
      lastUpdated: 'Last updated',
      sections: {
        overview: {
          title: '1. Privacy at a Glance',
          general: {
            title: 'General Information',
            text: 'The following notes provide a simple overview of what happens to your personal data when you visit this website. Personal data is any data that can be used to personally identify you. For detailed information on data protection, please refer to our privacy policy listed below this text.'
          },
          dataCollection: {
            title: 'Data Collection on This Website',
            responsible: {
              title: 'Who is responsible for data collection on this website?',
              text: 'Data processing on this website is carried out by the website operator. You can find their contact details in the "Notice of Responsible Party" section of this privacy policy.'
            },
            how: {
              title: 'How do we collect your data?',
              text1: 'Your data is collected in part by you providing it to us. This may, for example, be data that you enter into a contact form.',
              text2: 'Other data is collected automatically or with your consent when you visit the website by our IT systems. This is mainly technical data (e.g., internet browser, operating system, or time of page access). This data is collected automatically as soon as you enter this website.'
            },
            purpose: {
              title: 'What do we use your data for?',
              text: 'Part of the data is collected to ensure the error-free provision of the website. Other data may be used to analyze your user behavior. If contracts can be concluded or initiated via the website, the transmitted data will also be processed for contract offers, orders, or other order requests.'
            },
            rights: {
              title: 'What rights do you have regarding your data?',
              text1: 'You have the right at any time to receive information free of charge about the origin, recipient, and purpose of your stored personal data. You also have the right to request the correction or deletion of this data. If you have given consent to data processing, you can revoke this consent at any time for the future. You also have the right, under certain circumstances, to request the restriction of the processing of your personal data. Furthermore, you have the right to lodge a complaint with the competent supervisory authority.',
              text2: 'For this and other questions about data protection, you can contact us at any time.'
            }
          }
        }
      }
    },
    imprint: {
      title: 'Imprint',
      subtitle: 'Information according to § 5 TMG',
      contact: 'Contact',
      phone: 'Phone',
      email: 'Email',
      responsible: 'Responsible for content according to § 55 Abs. 2 RStV',
      disputeResolution: 'Dispute Resolution',
      disputeText: 'The European Commission provides a platform for online dispute resolution (ODR). We are not willing or obliged to participate in dispute resolution proceedings before a consumer arbitration board.'
    },
    cookies: {
      title: 'Cookie Policy',
      lastUpdated: 'Last updated',
      intro: 'This Cookie Policy explains what cookies are and how we use them.',
      what: {
        title: 'What are Cookies?',
        text: 'Cookies are small text files that are stored on your computer or mobile device when you visit a website. They are widely used to make websites functional or more efficient, as well as to provide reporting information.'
      },
      why: {
        title: 'Why do we use Cookies?',
        text: 'We use first-party and third-party cookies for several reasons. Some cookies are required for technical reasons for our website to function, and we refer to these as "essential" or "strictly necessary" cookies. Other cookies also enable us to track and target the interests of our users.'
      },
      types: {
        title: 'What types of Cookies do we use?',
        necessary: 'Necessary Cookies',
        functional: 'Functional Cookies',
        analytics: 'Analytics Cookies',
        marketing: 'Marketing Cookies'
      }
    }
  }
};

function initLegalTranslations() {
  const currentLang = localStorage.getItem('preferred-language') || 'de';

  document.querySelectorAll('[data-legal]').forEach(el => {
    const path = el.getAttribute('data-legal').split('.');
    let translation = legalTranslations[currentLang];

    for (const key of path) {
      translation = translation?.[key];
    }

    if (translation) {
      el.textContent = translation;
    }
  });
}

if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initLegalTranslations);
} else {
  initLegalTranslations();
}

window.addEventListener('storage', (e) => {
  if (e.key === 'preferred-language') {
    initLegalTranslations();
  }
});
